// ==UserScript==
// @name                 ReadIt
// @namespace            http://github.com/tralwdwd/
// @version              1.0.1-6e5e46d
// @description          A userscript for Reddit Web with plugin support.
// @author               tralwdwd
// @match                https://*.reddit.com/*
// @icon                 https://www.redditstatic.com/desktop2x/img/favicon/apple-icon-76x76.png
// @run-at               document-end
// @downloadURL          https://github.com/readit-mod/readit/releases/latest/download/readit.user.js
// @grant                GM.xmlHttpRequest
// @grant                unsafeWindow
// @grant                GM.getValue
// @grant                GM.setValue
// @grant                GM_getValue
// @grant                GM_setValue
// ==/UserScript==

// This code has been bundled, for source code go to https://github.com/readit-mod/readit

const window = unsafeWindow;

(function(){"use strict";const Yu=unsafeWindow;class Ku{constructor(e){this.readit=e,this.selector="shreddit-post, shreddit-ad-post",this.postCallbacks=[],this._queuedPosts=new Set,this._rafScheduled=!1,this.registerOnPostsLoaded=i=>(this.postCallbacks.push(i),this._callbackInitialScan(),()=>{const s=this.postCallbacks.indexOf(i);s!==-1&&this.postCallbacks.splice(s,1)}),new MutationObserver(i=>{for(const s of i)for(const r of Array.from(s.addedNodes))r.nodeType===1&&r instanceof HTMLElement&&(r.matches(this.selector)&&this._queuedPosts.add(r),r.querySelectorAll(this.selector).forEach(l=>this._queuedPosts.add(l)));this._scheduleEmit()}).observe(document.body,{childList:!0,subtree:!0})}_callbackInitialScan(){const e=document.querySelectorAll(this.selector);e.length>0&&this._emitPosts(Array.from(e))}_scheduleEmit(){this._rafScheduled||(this._rafScheduled=!0,Yu.requestAnimationFrame(()=>{this._queuedPosts.size>0&&(this._emitPosts(Array.from(this._queuedPosts)),this._queuedPosts.clear()),this._rafScheduled=!1}))}_emitPosts(e){this.postCallbacks.forEach(t=>t(e))}}unsafeWindow;const pn=n=>n;unsafeWindow;const Ju=pn({name:"ReadIt Adblock",description:"Builtin plugin to remove ads from the website.",id:"readit-adblock",version:"1.0.0",async onLoad({logging:n,posts:e,settings:t,storage:i,cleanup:s}){let r=await i.get("ads-blocked",0),o=e.registerLoadCallback(async a=>{a.forEach(h=>{h.matches("shreddit-ad-post")&&(r++,h.remove())}),await i.set("ads-blocked",r)}),l=t.registerSettingsTile({title:"Ads Blocked",description:`Total ads blocked: ${r}`,icon:"ðŸš«"});s(()=>{o(),l()}),n.info("Loaded successfully...")}}),Zu=Object.freeze(Object.defineProperty({__proto__:null,default:Ju},Symbol.toStringTag,{value:"Module"}));unsafeWindow;const ed=pn({name:"ReadIt CSS Enhancer",description:"Builtin plugin to add some CSS enhancements.",id:"readit-css-enhancer",version:"1.0.0",async onLoad({customcss:n,cleanup:e}){n.addRule(`#user-drawer-content {
                            max-height: 90vh !important;
                            overflow-y: auto !important;
            }`),n.addRule(`::-webkit-scrollbar-thumb {
                            background: #888;
                            border-radius: 4px;
                            border: 2px solid #1a1a1a;
            }`),n.addRule(`
                    ::-webkit-scrollbar {
                            width: 8px;
                            height: 8px;
            }`),e(()=>{n.clearRules()})}}),td=Object.freeze(Object.defineProperty({__proto__:null,default:ed},Symbol.toStringTag,{value:"Module"})),Xs=unsafeWindow;function bt(n){if(Xs.ReadItNative)return n()}async function id(n){if(Xs.ReadItNative)return await n()}function nd(){return!!Xs.ReadItNative}const sd=unsafeWindow;let Us;Us=bt(()=>sd.ReadItNative.meta)??{loaderVersion:GM_info.script.version,platform:"userscript"};const gn=unsafeWindow,rd=pn({name:"ReadIt DevTools",description:"Adds some tools for developers.",id:"readit-devtools",version:"1.0.0",async onLoad({settings:n,cleanup:e}){let t=[{title:"ReadIt Loader Version",description:Us.loaderVersion},{title:"ReadIt Platform",description:Us.platform},...await id(async()=>[{title:"Current Bundle URL",description:await gn.ReadItNative.bundle.getBundleURL()},{title:"Change ReadIt Bundle URL (DANGEROUS)",description:"Change where ReadIt Desktop gets the bundle from, can cause errors.",async onClick(){let s=await prompt("New Bundle URL",await gn.ReadItNative.bundle.getBundleURL());s&&(await gn.ReadItNative.bundle.setBundleURL(s),alert("Please restart to apply changes."))}},{title:"Reset ReadIt Bundle URL",description:"Reset where ReadIt Desktop gets the bundle.",onClick(){gn.ReadItNative.bundle.resetBundleURL(),alert("You should restart ReadIt Desktop to apply changes.")}}])??[]];const i=[];i.push(n.registerSettingsPage({id:"devtools",title:"Devtools",items:t})),i.push(n.registerNavigationTile({title:"ReadIt Devtools",description:"Some tools useful for developers.",icon:"ðŸ› ï¸",id:"devtools"})),e(()=>{i.forEach(s=>s())})}}),od=Object.freeze(Object.defineProperty({__proto__:null,default:rd},Symbol.toStringTag,{value:"Module"})),Fe=unsafeWindow,ld=pn({name:"ReadIt Tracking Blocker",description:"Builtin plugin to block tracking scripts.",id:"readit-tracking-blocker",version:"1.1.0",async onLoad({cleanup:n}){const e=[{match:/\/svc\/shreddit\/events\b/i,bodyReplacements:[{name:"info",replacement:[]}]},{match:/\/svc\/shreddit\/perfMetrics\b/i,bodyReplacements:[{name:"meta",replacement:[]},{name:"metrics",replacement:[]}]},{match:/https:\/\/w3-reporting\.reddit\.com\/reports\b/i,body:[{age:1,type:"reddit-w3reporting",url:"",user_agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) GenericBrowser/100.0 Safari/537.36",body:{sampling_fraction:0,type:"histogram",name:"shreddit_first_contentful_paint_seconds",value:0,labels:{device_type:"desktop",is_logged_in:"false",microapp_deployment:"production",microapp_name:"none",microapp_pool:"none",page_type:"none",route_name:"none",hybrid_nav:"false",comments_lit_ssr:"unknown",is_cached:"false"}}}]}],t=Fe.fetch,i=Fe.navigator.sendBeacon,s=new Proxy(t,{apply(a,h,c){const[f]=c;let u=c[1];const d=f.toString();for(const p of e)if(p.match.test(d)&&(p.bodyReplacements||p.body)&&u?.body)try{let g=JSON.parse(u.body);if(p.bodyReplacements)for(const y of p.bodyReplacements)g[y.name]=y.replacement;else g=p.body;u={...u,body:JSON.stringify(g)}}catch{}return Reflect.apply(a,h,[f,u])}}),r=new Proxy(i,{apply(a,h,c){const[f,u]=c;for(const d of e)if(d.match.test(f.toString())&&(d.bodyReplacements||d.body)&&typeof u=="string")try{let p=JSON.parse(u);if(d.bodyReplacements)for(const y of d.bodyReplacements)p[y.name]=y.replacement;else p=d.body;const g=JSON.stringify(p);return Reflect.apply(a,h,[f,g])}catch{}return Reflect.apply(a,h,c)}});Fe.fetch=s,Fe.navigator.sendBeacon=r;const o={},l=()=>{};if(Fe.Sentry)for(const a of Object.keys(Fe.Sentry)){const h=Fe.Sentry[a];o[a]=h,Fe.Sentry[a]=l}n(()=>{Fe.fetch=t,Fe.navigator.sendBeacon=i;for(const a of Object.keys(o))Fe.Sentry[a]=o[a]})}}),ad=Object.freeze(Object.defineProperty({__proto__:null,default:ld},Symbol.toStringTag,{value:"Module"}));var mn,H,fl,Bt,ul,dl,pl,gl,Gs,Ys,Ks,Oi={},ml=[],hd=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,yn=Array.isArray;function at(n,e){for(var t in e)n[t]=e[t];return n}function Js(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function cd(n,e,t){var i,s,r,o={};for(r in e)r=="key"?i=e[r]:r=="ref"?s=e[r]:o[r]=e[r];if(arguments.length>2&&(o.children=arguments.length>3?mn.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(r in n.defaultProps)o[r]===void 0&&(o[r]=n.defaultProps[r]);return bn(n,o,i,s,null)}function bn(n,e,t,i,s){var r={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++fl,__i:-1,__u:0};return s==null&&H.vnode!=null&&H.vnode(r),r}function wi(n){return n.children}function ki(n,e){this.props=n,this.context=e}function Gt(n,e){if(e==null)return n.__?Gt(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Gt(n):null}function yl(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return yl(n)}}function bl(n){(!n.__d&&(n.__d=!0)&&Bt.push(n)&&!xn.__r++||ul!=H.debounceRendering)&&((ul=H.debounceRendering)||dl)(xn)}function xn(){for(var n,e,t,i,s,r,o,l=1;Bt.length;)Bt.length>l&&Bt.sort(pl),n=Bt.shift(),l=Bt.length,n.__d&&(t=void 0,i=void 0,s=(i=(e=n).__v).__e,r=[],o=[],e.__P&&((t=at({},i)).__v=i.__v+1,H.vnode&&H.vnode(t),Zs(e.__P,t,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,r,s??Gt(i),!!(32&i.__u),o),t.__v=i.__v,t.__.__k[t.__i]=t,vl(r,t,o),i.__e=i.__=null,t.__e!=s&&yl(t)));xn.__r=0}function xl(n,e,t,i,s,r,o,l,a,h,c){var f,u,d,p,g,y,b,x=i&&i.__k||ml,k=e.length;for(a=fd(t,e,x,a,k),f=0;f<k;f++)(d=t.__k[f])!=null&&(u=d.__i==-1?Oi:x[d.__i]||Oi,d.__i=f,y=Zs(n,d,u,s,r,o,l,a,h,c),p=d.__e,d.ref&&u.ref!=d.ref&&(u.ref&&tr(u.ref,null,d),c.push(d.ref,d.__c||p,d)),g==null&&p!=null&&(g=p),(b=!!(4&d.__u))||u.__k===d.__k?a=Ol(d,a,n,b):typeof d.type=="function"&&y!==void 0?a=y:p&&(a=p.nextSibling),d.__u&=-7);return t.__e=g,a}function fd(n,e,t,i,s){var r,o,l,a,h,c=t.length,f=c,u=0;for(n.__k=new Array(s),r=0;r<s;r++)(o=e[r])!=null&&typeof o!="boolean"&&typeof o!="function"?(a=r+u,(o=n.__k[r]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?bn(null,o,null,null,null):yn(o)?bn(wi,{children:o},null,null,null):o.constructor==null&&o.__b>0?bn(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,l=null,(h=o.__i=ud(o,t,a,f))!=-1&&(f--,(l=t[h])&&(l.__u|=2)),l==null||l.__v==null?(h==-1&&(s>c?u--:s<c&&u++),typeof o.type!="function"&&(o.__u|=4)):h!=a&&(h==a-1?u--:h==a+1?u++:(h>a?u--:u++,o.__u|=4))):n.__k[r]=null;if(f)for(r=0;r<c;r++)(l=t[r])!=null&&(2&l.__u)==0&&(l.__e==i&&(i=Gt(l)),Cl(l,l));return i}function Ol(n,e,t,i){var s,r;if(typeof n.type=="function"){for(s=n.__k,r=0;s&&r<s.length;r++)s[r]&&(s[r].__=n,e=Ol(s[r],e,t,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=Gt(n)),t.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ud(n,e,t,i){var s,r,o,l=n.key,a=n.type,h=e[t],c=h!=null&&(2&h.__u)==0;if(h===null&&n.key==null||c&&l==h.key&&a==h.type)return t;if(i>(c?1:0)){for(s=t-1,r=t+1;s>=0||r<e.length;)if((h=e[o=s>=0?s--:r++])!=null&&(2&h.__u)==0&&l==h.key&&a==h.type)return o}return-1}function wl(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||hd.test(e)?t:t+"px"}function On(n,e,t,i,s){var r,o;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||wl(n.style,e,"");if(t)for(e in t)i&&t[e]==i[e]||wl(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(gl,"$1")),o=e.toLowerCase(),e=o in n||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+r]=t,t?i?t.u=i.u:(t.u=Gs,n.addEventListener(e,r?Ks:Ys,r)):n.removeEventListener(e,r?Ks:Ys,r);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function kl(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=Gs++;else if(e.t<t.u)return;return t(H.event?H.event(e):e)}}}function Zs(n,e,t,i,s,r,o,l,a,h){var c,f,u,d,p,g,y,b,x,k,v,w,S,C,B,L,F,Q=e.type;if(e.constructor!=null)return null;128&t.__u&&(a=!!(32&t.__u),r=[l=e.__e=t.__e]),(c=H.__b)&&c(e);e:if(typeof Q=="function")try{if(b=e.props,x="prototype"in Q&&Q.prototype.render,k=(c=Q.contextType)&&i[c.__c],v=c?k?k.props.value:c.__:i,t.__c?y=(f=e.__c=t.__c).__=f.__E:(x?e.__c=f=new Q(b,v):(e.__c=f=new ki(b,v),f.constructor=Q,f.render=pd),k&&k.sub(f),f.props=b,f.state||(f.state={}),f.context=v,f.__n=i,u=f.__d=!0,f.__h=[],f._sb=[]),x&&f.__s==null&&(f.__s=f.state),x&&Q.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=at({},f.__s)),at(f.__s,Q.getDerivedStateFromProps(b,f.__s))),d=f.props,p=f.state,f.__v=e,u)x&&Q.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),x&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(x&&Q.getDerivedStateFromProps==null&&b!==d&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(b,v),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(b,f.__s,v)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(f.props=b,f.state=f.__s,f.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(D){D&&(D.__=e)}),w=0;w<f._sb.length;w++)f.__h.push(f._sb[w]);f._sb=[],f.__h.length&&o.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(b,f.__s,v),x&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(d,p,g)})}if(f.context=v,f.props=b,f.__P=n,f.__e=!1,S=H.__r,C=0,x){for(f.state=f.__s,f.__d=!1,S&&S(e),c=f.render(f.props,f.state,f.context),B=0;B<f._sb.length;B++)f.__h.push(f._sb[B]);f._sb=[]}else do f.__d=!1,S&&S(e),c=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++C<25);f.state=f.__s,f.getChildContext!=null&&(i=at(at({},i),f.getChildContext())),x&&!u&&f.getSnapshotBeforeUpdate!=null&&(g=f.getSnapshotBeforeUpdate(d,p)),L=c,c!=null&&c.type===wi&&c.key==null&&(L=Sl(c.props.children)),l=xl(n,yn(L)?L:[L],e,t,i,s,r,o,l,a,h),f.base=e.__e,e.__u&=-161,f.__h.length&&o.push(f),y&&(f.__E=f.__=null)}catch(D){if(e.__v=null,a||r!=null)if(D.then){for(e.__u|=a?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;r[r.indexOf(l)]=null,e.__e=l}else{for(F=r.length;F--;)Js(r[F]);er(e)}else e.__e=t.__e,e.__k=t.__k,D.then||er(e);H.__e(D,e,t)}else r==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):l=e.__e=dd(t.__e,e,t,i,s,r,o,a,h);return(c=H.diffed)&&c(e),128&e.__u?void 0:l}function er(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(er)}function vl(n,e,t){for(var i=0;i<t.length;i++)tr(t[i],t[++i],t[++i]);H.__c&&H.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(r){r.call(s)})}catch(r){H.__e(r,s.__v)}})}function Sl(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:yn(n)?n.map(Sl):at({},n)}function dd(n,e,t,i,s,r,o,l,a){var h,c,f,u,d,p,g,y=t.props,b=e.props,x=e.type;if(x=="svg"?s="http://www.w3.org/2000/svg":x=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),r!=null){for(h=0;h<r.length;h++)if((d=r[h])&&"setAttribute"in d==!!x&&(x?d.localName==x:d.nodeType==3)){n=d,r[h]=null;break}}if(n==null){if(x==null)return document.createTextNode(b);n=document.createElementNS(s,x,b.is&&b),l&&(H.__m&&H.__m(e,r),l=!1),r=null}if(x==null)y===b||l&&n.data==b||(n.data=b);else{if(r=r&&mn.call(n.childNodes),y=t.props||Oi,!l&&r!=null)for(y={},h=0;h<n.attributes.length;h++)y[(d=n.attributes[h]).name]=d.value;for(h in y)if(d=y[h],h!="children"){if(h=="dangerouslySetInnerHTML")f=d;else if(!(h in b)){if(h=="value"&&"defaultValue"in b||h=="checked"&&"defaultChecked"in b)continue;On(n,h,null,d,s)}}for(h in b)d=b[h],h=="children"?u=d:h=="dangerouslySetInnerHTML"?c=d:h=="value"?p=d:h=="checked"?g=d:l&&typeof d!="function"||y[h]===d||On(n,h,d,y[h],s);if(c)l||f&&(c.__html==f.__html||c.__html==n.innerHTML)||(n.innerHTML=c.__html),e.__k=[];else if(f&&(n.innerHTML=""),xl(e.type=="template"?n.content:n,yn(u)?u:[u],e,t,i,x=="foreignObject"?"http://www.w3.org/1999/xhtml":s,r,o,r?r[0]:t.__k&&Gt(t,0),l,a),r!=null)for(h=r.length;h--;)Js(r[h]);l||(h="value",x=="progress"&&p==null?n.removeAttribute("value"):p!=null&&(p!==n[h]||x=="progress"&&!p||x=="option"&&p!=y[h])&&On(n,h,p,y[h],s),h="checked",g!=null&&g!=n[h]&&On(n,h,g,y[h],s))}return n}function tr(n,e,t){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(s){H.__e(s,t)}}function Cl(n,e,t){var i,s;if(H.unmount&&H.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||tr(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){H.__e(r,e)}i.base=i.__P=null}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&Cl(i[s],e,t||typeof n.type!="function");t||Js(n.__e),n.__c=n.__=n.__e=void 0}function pd(n,e,t){return this.constructor(n,t)}function ir(n,e,t){var i,s,r,o;e==document&&(e=document.documentElement),H.__&&H.__(n,e),s=(i=!1)?null:e.__k,r=[],o=[],Zs(e,n=e.__k=cd(wi,null,[n]),s||Oi,Oi,e.namespaceURI,s?null:e.firstChild?mn.call(e.childNodes):null,r,s?s.__e:e.firstChild,i,o),vl(r,n,o)}mn=ml.slice,H={__e:function(n,e,t,i){for(var s,r,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(n)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),o=s.__d),o)return s.__E=s}catch(l){n=l}throw n}},fl=0,ki.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=at({},this.state),typeof n=="function"&&(n=n(at({},t),this.props)),n&&at(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),bl(this))},ki.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),bl(this))},ki.prototype.render=wi,Bt=[],dl=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pl=function(n,e){return n.__v.__b-e.__v.__b},xn.__r=0,gl=/(PointerCapture)$|Capture$/i,Gs=0,Ys=kl(!1),Ks=kl(!0);var gd=0;function T(n,e,t,i,s,r){e||(e={});var o,l,a=e;if("ref"in a)for(l in a={},e)l=="ref"?o=e[l]:a[l]=e[l];var h={type:n,props:a,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--gd,__i:-1,__u:0,__source:s,__self:r};if(typeof n=="function"&&(o=n.defaultProps))for(l in o)a[l]===void 0&&(a[l]=o[l]);return H.vnode&&H.vnode(h),h}const md=unsafeWindow;async function yd(n){const e=await bt(async()=>await new Promise((s,r)=>{md.ReadItNative.network.xmlHttpRequest({method:"GET",url:n,onload:o=>s(o.responseText),onerror:o=>r(o)})}))??await new Promise((s,r)=>{GM.xmlHttpRequest({method:"GET",url:n,onload:o=>s(o.responseText),onerror:o=>r(o)})}),t=new Blob([`${nd()?"":"const window = unsafeWindow;"}${e}`],{type:"text/javascript"}),i=URL.createObjectURL(t);try{return await import(i)}finally{URL.revokeObjectURL(i)}}var vi,J,nr,Al,wn=0,Ml=[],ee=H,Pl=ee.__b,_l=ee.__r,Tl=ee.diffed,Dl=ee.__c,Rl=ee.unmount,Ql=ee.__;function sr(n,e){ee.__h&&ee.__h(J,n,wn||e),wn=0;var t=J.__H||(J.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function rr(n){return wn=1,bd(Nl,n)}function bd(n,e,t){var i=sr(vi++,2);if(i.t=n,!i.__c&&(i.__=[Nl(void 0,e),function(l){var a=i.__N?i.__N[0]:i.__[0],h=i.t(a,l);a!==h&&(i.__N=[h,i.__[1]],i.__c.setState({}))}],i.__c=J,!J.__f)){var s=function(l,a,h){if(!i.__c.__H)return!0;var c=i.__c.__H.__.filter(function(u){return!!u.__c});if(c.every(function(u){return!u.__N}))return!r||r.call(this,l,a,h);var f=i.__c.props!==l;return c.forEach(function(u){if(u.__N){var d=u.__[0];u.__=u.__N,u.__N=void 0,d!==u.__[0]&&(f=!0)}}),r&&r.call(this,l,a,h)||f};J.__f=!0;var r=J.shouldComponentUpdate,o=J.componentWillUpdate;J.componentWillUpdate=function(l,a,h){if(this.__e){var c=r;r=void 0,s(l,a,h),r=c}o&&o.call(this,l,a,h)},J.shouldComponentUpdate=s}return i.__N||i.__}function Bl(n,e){var t=sr(vi++,3);!ee.__s&&Il(t.__H,e)&&(t.__=n,t.u=e,J.__H.__h.push(t))}function El(n){return wn=5,xd(function(){return{current:n}},[])}function xd(n,e){var t=sr(vi++,7);return Il(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function Od(){for(var n;n=Ml.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(kn),n.__H.__h.forEach(or),n.__H.__h=[]}catch(e){n.__H.__h=[],ee.__e(e,n.__v)}}ee.__b=function(n){J=null,Pl&&Pl(n)},ee.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),Ql&&Ql(n,e)},ee.__r=function(n){_l&&_l(n),vi=0;var e=(J=n.__c).__H;e&&(nr===J?(e.__h=[],J.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(kn),e.__h.forEach(or),e.__h=[],vi=0)),nr=J},ee.diffed=function(n){Tl&
